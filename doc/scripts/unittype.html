<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head>
<!--
----	(c) Copyright 2002-2003 by Lutz Sammer

----    This program is free software; you can redistribute it and/or modify
----    it under the terms of the GNU General Public License as published by
----    the Free Software Foundation; version 2 dated June, 1991.
----
----    This program is distributed in the hope that it will be useful,
----    but WITHOUT ANY WARRANTY; without even the implied warranty of
----    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
----    GNU General Public License for more details.
----
----    You should have received a copy of the GNU General Public License
----    along with this program; if not, write to the Free Software
----    Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA
----    02111-1307, USA.
-->
    <title>Stratagus Configuration Language Description: UnitType</title>
    <meta http-equiv="Content-Type" content="text/html; CHARSET=iso-8859-1">
    <meta name="Author" content="johns98@gmx.net">
    <meta name="Keyword" content="ccl,unittype">
    <meta name="Description" content="">
</head>
<body>
    <h1>Stratagus Configuration Language Description: UnitType</h1>
<hr><pre width=80>
         _________ __                 __                               
        /   _____//  |_____________ _/  |______     ____  __ __  ______
        \_____  \\   __\_  __ \__  \\   __\__  \   / ___\|  |  \/  ___/
        /        \|  |  |  | \// __ \|  |  / __ \_/ /_/  >  |  /\___ \ 
       /_______  /|__|  |__|  (____  /__| (____  /\___  /|____//____  >
               \/                  \/          \//_____/            \/ 
    ______________________                           ______________________
			  T H E   W A R   B E G I N S
	   Stratagus - A free fantasy real time strategy game engine
</pre>
<p><b>(C) Copyright 1998-2003 by The Stratagus Project. Distributed under the
<a href="../gpl.html">"GNU General Public License"</a></b>
<hr>
<a href="../clone.html">Stratagus</a> 
<a href="../readme.html">Readme</a> 
<a href="../faq.html">FAQ</a> 
<a href="ccl.html">CCL</a> 
<a href="ui.html">PREV</a> 
<a href="ai.html">NEXT</a> 
<a href="ccl-index.html">Index</a> 
<hr>
<a href="#define-animations">define-animations</a>
<a href="#define-unit-stats">define-unit-stats</a>
<a href="#define-unit-type">define-unit-type</a>
<a href="#define-unittype-wc-names">define-unittype-wc-names</a>
<a href="#get-unit-type-ident">get-unit-type-ident</a>
<a href="#get-unit-type-name">get-unit-type-name</a>
<a href="#get-unit-type-property">get-unit-type-property</a>
<a href="#set-unit-type-name">set-unit-type-name</a>
<a href="#set-unit-type-property">set-unit-type-property</a>
<a href="#unit-type">unit-type</a>
<a href="#unit-type-array">unit-type-array</a>
<hr>
<h2>Intro - Introduction to unit-type functions and variables</h2>

Everything around the C UnitType structure.

<h2>Functions</h2>
<a name="define-animations"></a>
<h3>define-animations</h3>

<h4>Description</h4>

Define animations.

<h4>Syntax</h4>

<code>(define-animations ident 'still script 'move script 'die script 'attack script)</code>

<dl>
<dt>ident</dt>
<dd>Name of the animation to define.
</dd>
<dt>script</dt>
<dd><pre>
	A script is a list of quad numbers.
		(#(Flags Pixel Sleep Frame) (#Flags Pixel Sleep Frame) ...)
	* Format of quad numbers:
		#(Flags Pixel Sleep Frame)
	o Flags are the sum of the following:
		1 Restart - restart animation
		2 Reset   - animation could here be aborted (switch to another)
		4 Sound   - play a sound with the animation
		8 Missile - fire a missile at this point
	o Pixel is the number of pixels to move (if this is a moving animation)
	o Sleep is the number of frames to wait for the next animation
	o Frame is increment to the frame of the image
</pre></dd>
</dl>

<h4>Example</h4>

<pre>
    (define-animations 'animation-footman
      'still '(	; #5
        #( 0 0   4   0) #( 3 0   1   0))
      'move '(	; #16 P32
        #( 0 3   2   0) #( 0 3   1   5) #( 0 3   2   5) #( 0 2   1  10)
        #( 0 3   1  10) #( 0 2   1   0) #( 0 3   2   0) #( 0 3   1  15)
        #( 0 3   2  15) #( 0 2   1  20) #( 0 3   1  20) #( 3 2   1   0))
      'attack '(	; #25
        #( 0 0   3  25) #( 0 0   3  30) #( 0 0   3  35) #(12 0   5  40)
        #( 0 0  10   0) #( 3 0   1   0))
      'die '(	; #107
        #( 0 0   3  45) #( 0 0   3  50) #( 0 0 100  55) #( 3 0   1  55)))

</pre>

<p>Defines the animations for the footman.

<h4>Used</h4>

<a href="../../data/ccl/anim.ccl"> $LIBRARYPATH/ccl/anim.ccl </a>

<a name="define-unit-stats"></a>
<h3>define-unit-stats</h3>

<h4>Description</h4>

Define unit stats.

<h4>Syntax</h4>

<code>(define-unit-stats ident player 'level level 'speed speed 'attack-range arange
'sight-range srange 'armor armor 'basic-damage bdamage 'piercing-damage pdamage 
'hit-points hp 'costs costs)</code>

<dl>
<dt>ident</dt>
<dd>Ident of the unit.
</dd>
<dt>player</dt>
<dd>Player number.
</dd>
<dt>level</dt>
<dd>.
</dd>
<dt>speed</dt>
<dd>.
</dd>
<dt>arange</dt>
<dd>.
</dd>
<dt>srange</dt>
<dd>.
</dd>
<dt>armor</dt>
<dd>.
</dd>
<dt>bdamage</dt>
<dd>.
</dd>
<dt>pdamage</dt>
<dd>.
</dd>
<dt>hp</dt>
<dd>.
</dd>
<dt>costs</dt>
<dd>.
</dd>
</dl>

<h4>Example</h4>

<pre>
    (define-unit-stats)
</pre>

<p>.

<h4>Not Used</h4>

<a name="define-unit-type"></a>
<h3>define-unit-type</h3>

<h4>Description</h4>

    Define the unit types in game it is based on the UDTA.<p>

    The default unit types are defined in <a href="../../data/ccl/units.ccl">
    $STRATAGUS_LIBRARY/data/units.ccl</a> and
    <a href="../../data/ccl/human/units.ccl">
    $STRATAGUS_LIBRARY/data/human/units.ccl</a> and
    <a href="../../data/ccl/orc/units.ccl">
    $STRATAGUS_LIBRARY/data/orc/units.ccl</a>. This could also be defined in
    own levels. <p>

<h4>Syntax</h4>

<code>(define-unit-type ident name graphics pixel_size animations icon
    speed overlay sight_range hitpoints magic costs tile_size box_size
    attack_range computer_reaction_range human_reaction_range armor
    priorty damage piercing_damge weapon_upgradable armor_upgradeable
    decay annoy_factor points missle corpse type right_mouse can_target
    flags sounds attack_sound)</code>

<dl>
<dt>ident</dt>
<dd>The unit-type unique identifier.  It is used to reference unit-types in
game. F.E: "unit-knight", "unit-gold-mine".
</dd>
<dt>name</dt>
<dd>The unit-type name shown in the game. F.E: "Knight", "Gold Mine".
If the name is too long, it is split at space.
</dd>
<dd></dd>
<dt>graphics</dt>
<dd>Defines the graphics used to display the unit-type in game. This could
be an array "#( summer winter wasteland swamp) with different files for the
tilesets. Or an indentifier "unit-xyz" if the graphics from an other unit-type
should be reused.<p>

Examples:
    <dl>
    <dt>#( "knight.png" () () () )</dt>
    <dd>For all tilesets are the same graphics "knight.png" used. </dd>
    <dt>#( "gold mine (summer).png" "gold mine (winter).png"
	"gold mine (wasteland).png" "gold mine (swamp).png")</dt>
    <dd>"gold mine (summer).png" is used for the summer tileset.<br>
	"gold mine (winter).png" is used for the winter tileset.<br>
	"gold mine (wasteland).png" is used for the wasteland tileset.<br>
	"gold mine (swamp).png" is used for the swamp tileset. </dd>
    <dt>"unit-knight"</dt>
    <dd>The graphics from the unit-type "unit-knight" is also used for the
	this unit-type (here paladin).</dd>
    </dl>
</dd>
<dt>pixel_size</dt>
<dd>Size of the unit-type graphic in pixeln. A list of X (width) and Y (height)
sizes.  F.E. '( 72 72 ), '( 96 96 ).</dd>
<dt>animations</dt>
<dd>Identifier to reference the animation sequences (scripts) for the
unit-type. F.E. "animations-knight", "animations-gold-mine".</dd>
<dt>icon</dt>
<dd>Identifier to reference the icon shown in game for this unit-type.
F.E. "icon-knight", "icon-gold-mine".</dd>
<dt>speed</dt>
<dd>The speed shown for this unit-type in game. (NOTE: this is
only shown and *not* used). F.E. 10, 13.</dd>
<dt>overlay</dt>
<dd>Define the overlay shown if this unit is constructed (build).
Currently are available:
<ul>
<li> 6 land construction site
<li> 7 human shipyard construction site
<li> 8 orc shipyard construction site
<li> 9 human oil well construction site
<li>10 orc oil well construction site
<li>11 human refinery construction site
<li>12 orc refinery construction site
<li>13 human foundry construction site
<li>14 orc foundry construction site
<li>15 wall construction site
</ul>
NOTE: this will be changed to identifiers sometime.
</dd>
<dt>sight_range</dt>
<dd>Sight range (in tiles) of this unit. F.E. 6, 14.</dd>
<dt>hitpoints</dt>
<dd>Hitpoints for this Unit. F.E. 90, 1000</dd>
<dt>magic</dt>
<dd>Flag to determine whether this unit is a spell user. 0 = false (not a magic
user), 1 = true (magic user).  F.E. 1, 0</dd>
<dt>costs</dt>
<dd>Define the costs to build (or aquire) this unit. It is an array of #(
time gold wood oil) or #(time gold wood oil ore stone coal). Time is in frames
to build this unit.
Gold is the amount required to build this unit. Wood is the amount required
to build this unit.  Oil is the amount required to build this unit.
F.E.: #( 200 2000 1000 200 ).<p>
NOTE: This is extendable more costs could be added. (using 6 resources insteed
of 3. Or redefining the gold resource into a crytal resource)
</dd>
<dt>tile_size</dt>
<dd>Define the unit-type size in tiles. NOTE: currently only buildings could
be bigger than one tile. A list of X (width) and Y (height) sizes. 
F.E. '( 1 1 ), '( 2 2 ).
</dd>
<dt>box_size</dt>
<dd></dd>
<dt>attack_range</dt>
<dd></dd>
<dt>computer_reaction_range</dt>
<dd></dd>
<dt>human_reaction_range</dt>
<dd></dd>
<dt>armor</dt>
<dd></dd>
<dt>priorty</dt>
<dd></dd>
<dt>damage</dt>
<dd></dd>
<dt>piercing_damge</dt>
<dd></dd>
<dt>weapon_upgradable</dt>
<dd></dd>
<dt>armor_upgradeable</dt>
<dd></dd>
<dt>decay</dt>
<dd></dd>
<dt>annoy_factor</dt>
<dd></dd>
<dt>points</dt>
<dd></dd>
<dt>missile</dt>
<dd></dd>
<dt>corpse</dt>
<dd></dd>
<dt>type</dt>
<dd></dd>
<dt>right_mouse</dt>
<dd></dd>
<dt>can_target</dt>
<dd></dd>
<dt>flags</dt>
<dd></dd>
<dt>sounds</dt>
<dd></dd>
<dt>attack_sound</dt>
<dd></dd>
</dl>

<h4>Example</h4>

<pre>
    (define-unit-type "unit-footman"		"Footman"
      ;; graphic data
      #("footman.png"
	()
	()
	() )
      '(  72  72 )			;; graphic size
      "animations-footman"	;; animations
      "icon-footman"
      ;;Speed OvFrame SightR Hitpnt Magic  BTime	Gold	Wood	Oil
	  10       0      4     60      0 #(   60    600       0      0 )
      ;;Tile    Box Size    Attack	ReactC	ReactH
      '( 1 1 ) '(  31  31 )     1       6       4
      ;;Armor Prior	Damage	Pierc	WUpgr	AUpgr
	   2    60      6      3       1       1
      ;;Decay Annoy	Points
	  0      0      50
      "missile-none"
      'corpse-human
      'type-land
      'right-attack
      'can-target-land 
      ;; flags
      'land-unit
      'can-attack
      'organic
      'selectable-by-rectangle
      ;; sounds
      #("footman-selected"
	"footman-acknowledge"
	"footman-ready"
	"footman-help"
	"footman-dead" )
      "footman-attack" )
</pre>
	Define the unit-type "unit-footman" as footman.<p>

<!--

<LI><var>unit-type</var><br>
    Get the pointer to the unit type structure.<p>
    (unit-type ident)
    <dl>
    <dt>ident</dt>
    <dd>The unit-type unique identifier.</dd>
    </dl>
    <p>
    <h4>Example:</h4>
    (unit-type "unit-peon")<p>
    Get the unit type structure of the peon. #<unittype 0x80ac350 unit-peon><p>

<li><var>unit-type-array</var><br>
    Get an array of all currently defined unit type structures.<p>
    (unit-type-array)
    <p>

<li><var>get-unit-type-ident</var><br>
    Get the unique identfier of the unit type structure.<p>
    (get-unit-type-ident type)
    <dl>
    <dt>type</dt>
    <dd>Unit type pointer</dd>
    </dl>
    <p>
    <h4>Example:</h4>
    (get-unit-type-ident (unit-type "unit-peon"))<p>
    Get the identifier of the unit type peon.<p>
-->

<a name="define-unittype-wc-names"></a>
<h3>define-unittype-wc-names</h3>

<h4>Description</h4>

Define unit-type mapping from original number to internal symbol.

<h4>Syntax</h4>

<code>(define-unittype-wc-names footman grunt ...)</code>

<h4>Example</h4>

<pre>
    (define-unittype-wc-names)
</pre>

<p>.

<h4>Used</h4>

<a href="../../data/ccl/wc2.ccl"> $LIBRARYPATH/ccl/wc2.ccl </a>

<a name="get-unit-type-ident"></a>
<h3>get-unit-type-ident</h3>

<h4>Description</h4>

Get the ident of the unit-type structure.

<h4>Syntax</h4>

<code>(get-unit-type-ident unit-type)</code>

<dl>
<dt>unit-type</dt>
<dd>.
</dd>
</dl>

<h4>Example</h4>

<pre>
    (get-unit-type-ident)
</pre>

<p>.

<h4>Not Used</h4>

<a name="get-unit-type-property"></a>
<h3>get-unit-type-property</h3>

<h4>Description</h4>

Get the property of the unit-type structure.

<h4>Syntax</h4>

<code>(get-unit-type-property unit-type)</code>

<dl>
<dt>unit-type</dt>
<dd>.
</dd>
</dl>

<h4>Example</h4>

<pre>
    (get-unit-type-property)
</pre>

<p>.

<h4>Not Used</h4>

<a name="get-unit-type-name"></a>
<h3>get-unit-type-name</h3>

<h4>Description</h4>

Get the name of the unit-type structure.

<h4>Syntax</h4>

<code>(get-unit-type-name unit-type)</code>

<dl>
<dt>unit-type</dt>
<dd>.
</dd>
</dl>

<h4>Example</h4>

<pre>
    (get-unit-type-name)
</pre>

<p>.

<h4>Not Used</h4>

<a name="set-unit-type-name!"></a>
<h3>set-unit-type-name!</h3>

<h4>Description</h4>

Set the name of the unit-type structure.

<h4>Syntax</h4>

<code>(set-unit-type-name! unit-type name)</code>

<dl>
<dt>unit-type</dt>
<dd>.
</dd>
<dt>name</dt>
<dd>.
</dd>
</dl>

<h4>Example</h4>

<pre>
    (set-unit-type-name!)
</pre>

<p>.

<h4>Not Used</h4>

<a name="set-unit-type-property"></a>
<h3>set-unit-type-property</h3>

<h4>Description</h4>

Set the property of the unit-type structure.

<h4>Syntax</h4>

<code>(set-unit-type-property unit-type property)</code>

<dl>
<dt>unit-type</dt>
<dd>.
</dd>
<dt>property</dt>
<dd>.
</dd>
</dl>

<h4>Example</h4>

<pre>
    (set-unit-type-property)
</pre>

<p>.

<h4>Not Used</h4>

<a name="unit-type"></a>
<h3>unit-type</h3>

<h4>Description</h4>

Get unit-type structure.

<h4>Syntax</h4>

<code>(unit-type ident)</code>

<dl>
<dt>ident</dt>
<dd>.
</dd>
</dl>

<h4>Example</h4>

<pre>
    (unit-type 'unit-great-hall)
</pre>

<p>.

<h4>Used</h4>

<a href="../../data/ccl/ai.ccl"> $LIBRARYPATH/ccl/ai.ccl </a>

<a name="unit-type-array"></a>
<h3>unit-type-array</h3>

<h4>Description</h4>

Get all unit-type structures.

<h4>Syntax</h4>

<code>(unit-type-array)</code>

<h4>Example</h4>

<pre>
    (unit-type-array)
</pre>

<p>.

<h4>Not Used</h4>

<hr>
Last changed: $Id$<br>
All trademarks and copyrights on this page are owned by their respective owners.
<address>(c) 2002-2003 by <a href="http://stratagus.org">
The Stratagus Project</a></address></body></html>
