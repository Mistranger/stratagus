##   ___________		     _________		      _____  __
##   \_	  _____/______   ____   ____ \_   ___ \____________ _/ ____\/  |_
##    |    __) \_  __ \_/ __ \_/ __ \/    \  \/\_  __ \__  \\   __\\   __\ 
##    |     \   |  | \/\  ___/\  ___/\     \____|  | \// __ \|  |   |  |
##    \___  /   |__|    \___  >\___  >\______  /|__|  (____  /__|   |__|
##	  \/		    \/	   \/	     \/		   \/
##  ______________________                           ______________________
##			  T H E   W A R   B E G I N S
##	   FreeCraft - A free fantasy real time strategy game engine
##
##	Makefile	-	Makefile for tools. (Level 2)
##
##	(c) Copyright 1998,2000,2001 by Lutz Sammer
##
##	FreeCraft is free software; you can redistribute it and/or modify
##	it under the terms of the GNU General Public License as published
##	by the Free Software Foundation; either version 2 of the License,
##	or (at your option) any later version.
##
##	FreeCraft is distributed in the hope that it will be useful,
##	but WITHOUT ANY WARRANTY; without even the implied warranty of
##	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
##	GNU General Public License for more details.
##
##	$Id$
##

TOPDIR= ..
RULESFILE ?= Rules.make
include $(TOPDIR)/$(RULESFILE)

EXECS=	gfx2png$(EXE) gfu2png$(EXE) img2png$(EXE) cur2png$(EXE) fnt2png$(EXE) \
	tile2png$(EXE) extract$(EXE) aledoc$(EXE) wartool$(EXE) startool$(EXE)

all::	aledoc$(EXE) wartool$(EXE) startool$(EXE)

old::	$(EXECS)

clean::
	$(RM) core gmon.out *.doc *.o

clobber:: clean
	$(RM) $(EXECS)

distclean:: clobber
	@echo

gfx2png$(EXE): gfx2png.c
	$(CC) $(CFLAGS) -DGFX -o $@ gfx2png.c $(TOOLLIBS)

gfu2png$(EXE): gfx2png.c
	$(CC) $(CFLAGS) -DGFU -o $@ gfx2png.c $(TOOLLIBS)

img2png$(EXE): gfx2png.c
	$(CC) $(CFLAGS) -DIMAGE -o $@ gfx2png.c $(TOOLLIBS)

cur2png$(EXE): gfx2png.c
	$(CC) $(CFLAGS) -DCUR -o $@ gfx2png.c $(TOOLLIBS)

fnt2png$(EXE): gfx2png.c
	$(CC) $(CFLAGS) -DFNT -o $@ gfx2png.c $(TOOLLIBS)

tile2png$(EXE): tile2png.c
	$(CC) $(CFLAGS) -DTILE -o $@ tile2png.c $(TOOLLIBS)

extract$(EXE): extract.c
	$(CC) $(CFLAGS) -o $@ extract.c $(TOOLLIBS)

aledoc$(EXE):	aledoc.c
	$(CC) $(CFLAGS) -o $@ $< $(TOOLLIBS)

wartool$(EXE): wartool.c $(TOPDIR)/Makefile $(TOPDIR)/Rules.make \
	$(TOPDIR)/src/include/freecraft.h $(TOPDIR)/src/include/iocompat.h \
	$(TOPDIR)/src/include/myendian.h
	$(CC) $(CFLAGS) -o $@ $< $(TOOLLIBS)

startool$(EXE):	startool.c $(TOPDIR)/Makefile $(TOPDIR)/Rules.make \
	$(TOPDIR)/src/clone/mpq.c $(TOPDIR)/src/include/freecraft.h \
	$(TOPDIR)/src/include/iocompat.h $(TOPDIR)/src/include/myendian.h \
	$(TOPDIR)/src/include/mpq.h
	$(CC) $(CFLAGS) -o $@ $< $(TOOLLIBS) $(TOPDIR)/src/clone/$(OBJDIR)/mpq.o

FILES= 	gfx2png.c tile2png.c extract.c \
	build.sh Makefile aledoc.c wartool.c startool.c build.bat

distlist:
	for i in $(FILES); do echo tools/$$i >>$(DISTLIST); done

ci:
	ci -l $(FILES)

lockver:
	$(LOCKVER) $(FILES)
